1. build linux kernel
1) apt-get update
2) apt-get install kernel-package libncurses5-dev fakeroot wget bzip2 build-essential
3) make-kpkg clean
4) fakeroot make-kpkg --jobs `nproc` --initrd kernel_image
   or
   fakeroot make-kpkg --jobs `nproc` --initrd --append-to-version=-custom kernel_image kernel_headers

2. submit LKP job
1) aubrey@inn:~$ lkp queue -b aubrey-fast_idle/4.8.x -k 59d15ffe62d16350cf800f10a4d4a86cd3cd7b71 -t lkp-bdw-ep2 netperf.yaml -r 3 -q vip -e aubrey.li@intel.com
2) aubrey@inn:~$ lkp wtmp lkp-bdw-ep2 
3) aubrey@inn:~$ kbuild-queue -b aubrey-fast_idle/avx_v9 -k d52843ee72fe3e7d2114c1c83b84d90ada6c2591 -w -c config
4) $lkp ncompare -k -a d34a27ce2f54bfa985373d40efb28e48c8a07a3f 6d616e5e762c00b9d7f4b160028922bcf12236cc
5) $lkp compare -at d34a27ce2f54bfa985373d40efb28e48c8a07a3f 6d616e5e762c00b9d7f4b160028922bcf12236cc -g schbench -g performance-100%-ucode=0x200004d
6) $lkp power_reboot lkp-skl-2sp5
7) $lkp serial lkp-skl-2sp5
8) $ssh lkp-skl-2sp5, root, asdf
9) list queued job: $ lkp lq lkp-skl-2sp5
10) list tbox: $ ls /lkp/wtmp/lkp-*

3. netperf
1) netserver
2) netperf -H 127.0.0.1 -l 60 -t TCP_RR

4. grub2 default entry
1) GRUB_DEFAULT="1>3"
2) sudo update-grub

5. kprobe
1) build kernel with CONFIG_KPROBE_EVENT=y
2) echo 'p:aubrey_probe intel_idle dev=%di drv=%si index=%dx' > /sys/kernel/debug/tracing/kprobe_events
3) echo 'r:aubrey_probe intel_idle $retval' > /sys/kernel/debug/tracing/kprobe_events
4) trace-cmd record -T -e aubrey_probe
5) trace-cmd report

6. add user
   useradd --create-home --user-group --shell /bin/bash <username>

7. process affinity
1) set affinity when the process is runing:
   taskset -cp 0-21 `pgrep netserver`
2) set affinity when the process is invoked:
   taskset -c 22-43 netserver
3) check which CPU the process is assigned to:
   ps -mo pid,tid,%cpu,psr -p `pgrep netserver`

8. unzip xz
   xz -d dmesg.xz

9. perf with intel_pt
1) perf-with-kcore record pt_tmp -C0 -e intel_pt/cyc/k --filter="filter tick_nohz_idle_enter / tick_nohz_idle_exit" -- sleep 2
2) perf-with-kcore script pt_tmp --itrace=cre --ns -Fcomm,pid,tid,cpu,time,ip,sym,symoff,dso,addr,flags,callindent

10. submit patch
1) git format-patch -2 -v1 --subject-prefix="RFC PATCH" --cover-letter
2) git send-email --to tglx@linutronix.de --to peterz@infradead.org --to len.brown@intel.com --to rjw@rjwysocki.net --to ak@linux.intel.com --to tim.c.chen@linux.intel.com --to arjan@linux.intel.com --to paulmck@linux.vnet.ibm.com --to yang.zhang.wz@gmail.com --cc x86@kernel.org --cc linux-kernel@vger.kernel.org *.patch

11. screen tips
C-a ?	显示所有键绑定信息
C-a w	显示所有窗口列表
C-a C-a	切换到之前显示的窗口
C-a c	创建一个新的运行shell的窗口并切换到该窗口
C-a n	切换到下一个窗口
C-a p	切换到前一个窗口(与C-a n相对)
C-a 0..9	切换到窗口0..9
C-a a	发送 C-a到当前窗口
C-a d	暂时断开screen会话
C-a k	杀掉当前窗口
C-a [	进入拷贝/回滚模式

12. setup simics networking
1) sudo apt-get install uml-utilities bridge-utils
2) sudo tunctl -u `whoami` -t sim_tap0
3) sudo ifconfig sim_tap0 192.168.1.10
4) simics console running> connect-real-network-host interface = sim_tap0

13. Linux kernel contributor list
1) git log v3.0..v4.15 | grep Author | cut -d ":" -f 2 | sort | uniq -c | sort -nr | head -n 500

14. ubuntu vnc
1) ubuntu-gnome-desktop
2) gnome-applets

15. git lkp
1) $ git fetch ssh://aubrey-skl/home/aubrey/work/linux-tip core_scheduling:core_scheduling
2) $ git checkout core_scheduling
3) $ git push -u origin core_scheduling
