1. build linux kernel
1) apt-get update
2) apt-get install kernel-package libncurses5-dev fakeroot wget bzip2 build-essential
3) make-kpkg clean
4) fakeroot make-kpkg --jobs `nproc` --initrd kernel_image
   or
   fakeroot make-kpkg --jobs `nproc` --initrd --append-to-version=-custom kernel_image kernel_headers

2. submit LKP job
1) aubrey@inn:~$ lkp queue -b aubrey-fast_idle/4.8.x -k 59d15ffe62d16350cf800f10a4d4a86cd3cd7b71 -t lkp-bdw-ep2 netperf.yaml -r 3 -q vip -e aubrey.li@intel.com
2) aubrey@inn:~$ lkp wtmp lkp-bdw-ep2 

3. netperf
1) netserver
2) netperf -H 127.0.0.1 -l 60 -t TCP_RR

4. grub2 default entry
1) GRUB_DEFAULT="1>3"
2) sudo update-grub

5. kprobe
1) build kernel with CONFIG_KPROBE_EVENT=y
2) echo 'p:aubrey_probe intel_idle dev=%di drv=%si index=%dx' > /sys/kernel/debug/tracing/kprobe_events
3) echo 'r:aubrey_probe intel_idle $retval' > /sys/kernel/debug/tracing/kprobe_events
4) trace-cmd record -T -e aubrey_probe
5) trace-cmd report

6. add user
   useradd --create-home --user-group --shell /bin/bash <username>

7. process affinity
1) set affinity when the process is runing:
   taskset -cp 0-21 `pgrep netserver`
2) set affinity when the process is invoked:
   taskset -c 22-43 netserver
3) check which CPU the process is assigned to:
   ps -mo pid,tid,%cpu,psr -p `pgrep netserver`

8. unzip xz
   xz -d dmesg.xz

9. perf with intel_pt
1) perf-with-kcore record pt_tmp -C0 -e intel_pt/cyc/k --filter="filter tick_nohz_idle_enter / tick_nohz_idle_exit" -- sleep 2
2) perf-with-kcore script pt_tmp --itrace=cre --ns -Fcomm,pid,tid,cpu,time,ip,sym,symoff,dso,addr,flags,callindent

10. submit patch
1) git format-patch -2 -v1 --subject-prefix="RFC PATCH" --cover-letter
2) git send-email --to len.brown@intel.com --to rafael.j.wysocki@intel.com --to arjan@linux.intel.com --cc linux-power-mgmt@eclists.intel.com --cc linux-power-mgmt@linux.intel.com *.patch
